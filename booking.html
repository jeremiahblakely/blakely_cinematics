<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>Book Your Session | Blakely Cinematics | Premium Photography Booking</title>
    <meta name="description" content="Book your cinematic photography session with Blakely Cinematics. Select your package, choose your date, and secure your spot for Hollywood-quality imagery.">
    <meta name="keywords" content="book photography session, cinematic portraits, Los Angeles photographer, photography booking">
    <meta name="author" content="Jeremiah Blakely">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://blakelycinematics.com/booking">
    <meta property="og:title" content="Book Your Session | Blakely Cinematics">
    <meta property="og:description" content="Book your cinematic photography session with Hollywood-quality results">
    <meta property="og:image" content="images/og-image.jpg">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Custom Booking Styles -->
    <style>
        /* ============================================ */
        /* BOOKING PAGE SPECIFIC STYLES               */
        /* ============================================ */
        
        .booking-page {
            background: var(--dark);
            min-height: 100vh;
            padding-top: 120px;
        }
        
        .booking-header {
            text-align: center;
            margin-bottom: 4rem;
            padding: 0 2rem;
        }
        
        .booking-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 100;
            letter-spacing: 0.3rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--light) 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .booking-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 300;
            letter-spacing: 0.1rem;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .booking-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .booking-form {
            display: grid;
            gap: 3rem;
            position: relative;
        }
        
        /* Step Indicator */
        .step-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 3rem;
            gap: 1rem;
        }
        
        .step {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            letter-spacing: 0.1rem;
        }
        
        .step.active {
            background: rgba(255, 107, 53, 0.2);
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .step.completed {
            background: rgba(34, 197, 94, 0.2);
            border-color: #22C55E;
            color: #22C55E;
        }
        
        .step-number {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .step.active .step-number,
        .step.completed .step-number {
            background: currentColor;
            color: var(--dark);
        }
        
        /* Step Sections */
        .step-section {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }
        
        .step-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .section-title {
            font-size: 2rem;
            font-weight: 100;
            letter-spacing: 0.2rem;
            margin-bottom: 2rem;
            color: var(--light);
            text-align: center;
        }
        
        /* Service Selection */
        .service-packages {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .package-card {
            background: rgba(255, 255, 255, 0.02);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .package-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 0%, rgba(255, 107, 53, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .package-card:hover::before {
            opacity: 1;
        }
        
        .package-card.selected {
            border-color: var(--primary);
            background: rgba(255, 107, 53, 0.1);
        }
        
        .package-card.selected::before {
            opacity: 1;
        }
        
        .package-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        
        .package-name {
            font-size: 1.8rem;
            font-weight: 300;
            letter-spacing: 0.1rem;
            margin-bottom: 0.5rem;
        }
        
        .package-price {
            font-size: 2.5rem;
            color: var(--primary);
            font-weight: 100;
            letter-spacing: 0.1rem;
        }
        
        .package-duration {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            letter-spacing: 0.1rem;
            text-transform: uppercase;
        }
        
        .package-description {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .package-features {
            list-style: none;
            padding: 0;
        }
        
        .package-features li {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        .package-features li::before {
            content: 'âœ“';
            color: var(--primary);
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        /* Calendar Section */
        .calendar-container {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            max-height: 400px;
            max-width: 500px;
            margin: 0 auto 1.5rem auto;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .calendar-nav {
            background: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--light);
            padding: 0.6rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }
        
        .calendar-nav:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .calendar-month {
            font-size: 1.2rem;
            font-weight: 300;
            letter-spacing: 0.15rem;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.2rem;
            margin-bottom: 2rem;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            justify-items: center;
        }
        
        .calendar-day-header {
            text-align: center;
            padding: 0.5rem 0.2rem;
            font-size: 0.65rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 0.05rem;
            font-weight: 500;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .calendar-day {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            position: relative;
            text-align: center;
            line-height: 1;
            box-sizing: border-box;
        }
        
        .calendar-day:hover {
            border-color: var(--primary);
            background: rgba(255, 107, 53, 0.1);
        }
        
        .calendar-day.available {
            color: var(--light);
        }
        
        .calendar-day.unavailable {
            color: rgba(255, 255, 255, 0.3);
            cursor: not-allowed;
            background: rgba(255, 255, 255, 0.02);
        }
        
        .calendar-day.selected {
            background: var(--primary);
            color: var(--dark);
            border-color: var(--primary);
        }
        
        .calendar-day.today {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        /* Time Slots */
        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 0.5rem;
            margin-top: 2.5rem;
            margin-bottom: 2rem;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .time-slot {
            padding: 0.6rem 0.4rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            letter-spacing: 0.05rem;
        }
        
        .time-slot:hover {
            border-color: var(--primary);
            background: rgba(255, 107, 53, 0.1);
        }
        
        .time-slot.selected {
            background: var(--primary);
            color: var(--dark);
            border-color: var(--primary);
        }
        
        .time-slot.unavailable {
            opacity: 0.4;
            cursor: not-allowed;
            background: rgba(255, 255, 255, 0.02);
        }
        
        /* Form Fields */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .booking-form .form-group {
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        /* Override floating label styles from main CSS */
        .booking-form .form-group label {
            position: static !important;
            display: block !important;
            margin-bottom: 0.8rem !important;
            color: var(--light) !important;
            font-size: 0.9rem !important;
            letter-spacing: 0.1rem !important;
            font-weight: 500 !important;
            background: none !important;
            padding: 0 !important;
            top: auto !important;
            left: auto !important;
            pointer-events: auto !important;
            transition: none !important;
        }
        
        .booking-form .form-group input,
        .booking-form .form-group textarea,
        .booking-form .form-group select {
            width: 100% !important;
            padding: 1.2rem !important;
            background: rgba(255, 255, 255, 0.05) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            border-radius: 8px !important;
            color: var(--light) !important;
            font-size: 1rem !important;
            transition: all 0.3s ease !important;
            font-family: inherit !important;
            box-sizing: border-box !important;
        }
        
        .booking-form .form-group input:focus,
        .booking-form .form-group textarea:focus,
        .booking-form .form-group select:focus {
            outline: none !important;
            border-color: var(--primary) !important;
            background: rgba(255, 255, 255, 0.08) !important;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.1) !important;
        }
        
        .booking-form .form-group textarea {
            resize: vertical !important;
            min-height: 120px !important;
        }
        
        /* Ensure no floating label behavior */
        .booking-form .form-group input:focus + label,
        .booking-form .form-group input:not(:placeholder-shown) + label,
        .booking-form .form-group textarea:focus + label,
        .booking-form .form-group textarea:not(:placeholder-shown) + label {
            position: static !important;
            top: auto !important;
            left: auto !important;
            font-size: 0.9rem !important;
            background: none !important;
            padding: 0 !important;
            color: var(--light) !important;
            margin-bottom: 0.8rem !important;
        }
        
        /* Validation States */
        .booking-form .form-group.error input,
        .booking-form .form-group.error textarea,
        .booking-form .form-group.error select {
            border-color: #ff4444 !important;
            background: rgba(255, 68, 68, 0.1) !important;
            box-shadow: 0 0 0 1px rgba(255, 68, 68, 0.3) !important;
        }
        
        .booking-form .form-group.error label {
            color: #ff4444 !important;
        }
        
        .booking-form .form-group.success input,
        .booking-form .form-group.success textarea,
        .booking-form .form-group.success select {
            border-color: #22c55e !important;
            background: rgba(34, 197, 94, 0.1) !important;
            box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.3) !important;
        }
        
        .form-error-message {
            color: #ff4444;
            font-size: 0.8rem;
            margin-top: 0.5rem;
            display: block;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .form-group.error .form-error-message {
            opacity: 1;
        }
        
        /* Booking Summary */
        .booking-summary {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: sticky;
            top: 140px;
        }
        
        .summary-title {
            font-size: 1.5rem;
            font-weight: 300;
            letter-spacing: 0.2rem;
            margin-bottom: 1.5rem;
            color: var(--light);
            text-align: center;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .summary-item:last-child {
            border-bottom: none;
            padding-top: 1rem;
            margin-top: 1rem;
            border-top: 2px solid var(--primary);
            font-size: 1.2rem;
            font-weight: 500;
        }
        
        .summary-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        .summary-value {
            color: var(--light);
            font-weight: 500;
        }
        
        .summary-total .summary-value {
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        /* Navigation Buttons */
        .form-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            gap: 1rem;
        }
        
        .nav-btn {
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            letter-spacing: 0.1rem;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
        }
        
        .nav-btn.secondary {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: var(--light);
        }
        
        .nav-btn.secondary:hover {
            border-color: var(--light);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-btn.primary {
            background: linear-gradient(135deg, var(--primary), #FF8C5A);
            color: var(--dark);
            border: none;
        }
        
        .nav-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.4);
        }
        
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .booking-page {
                padding-top: 100px;
            }
            
            .step-indicator {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .step {
                padding: 0.6rem 1rem;
                font-size: 0.8rem;
            }
            
            .service-packages {
                grid-template-columns: 1fr;
            }
            
            .calendar-container {
                padding: 1rem;
                max-width: 100%;
                max-height: 350px;
            }
            
            .calendar-grid {
                gap: 0.15rem;
                max-width: 100%;
                margin-bottom: 2rem;
                justify-items: center;
            }
            
            .calendar-day {
                width: 35px;
                height: 35px;
                font-size: 0.75rem;
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                line-height: 1;
                box-sizing: border-box;
            }
            
            .calendar-day-header {
                padding: 0.4rem 0.1rem;
                font-size: 0.6rem;
                height: 25px;
            }
            
            .calendar-header {
                max-width: 100%;
            }
            
            .calendar-month {
                font-size: 1rem;
            }
            
            .calendar-nav {
                padding: 0.5rem 0.8rem;
                font-size: 0.75rem;
            }
            
            .time-slots {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
                margin-top: 2rem;
                margin-bottom: 2rem;
                padding-top: 1.5rem;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                max-width: 100%;
            }
            
            .time-slot {
                padding: 0.7rem 0.3rem;
                font-size: 0.8rem;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-navigation {
                flex-direction: column;
                margin-top: 1.5rem;
            }
            
            .nav-btn {
                width: 100%;
            }
            
            .booking-summary {
                position: static;
            }
            
            .section-title {
                font-size: 1.5rem;
                margin-bottom: 1.5rem;
            }
        }
        
        /* Compact layout improvements */
        @media (max-width: 1024px) {
            .calendar-container {
                padding: 1.2rem;
                max-height: 380px;
                max-width: 450px;
            }
            
            .calendar-grid {
                gap: 0.18rem;
                margin-bottom: 2rem;
                justify-items: center;
            }
            
            .calendar-day {
                width: 38px;
                height: 38px;
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                line-height: 1;
                box-sizing: border-box;
            }
            
            .time-slots {
                grid-template-columns: repeat(3, 1fr);
                max-width: 450px;
                margin-top: 2.5rem;
                padding-top: 1.5rem;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>
    
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">BLAKELY</a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="index.html#portfolio">Portfolio</a></li>
                <li><a href="faq.html">FAQ</a></li>
                <li><a href="index.html#contact">Contact</a></li>
                <li><a href="vip.html" class="vip-link">VIP</a></li>
            </ul>
            <button class="mobile-menu-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>
    
    <!-- Booking Page -->
    <div class="booking-page">
        <!-- Header -->
        <div class="booking-header">
            <h1 class="booking-title">BOOK YOUR SESSION</h1>
            <p class="booking-subtitle">
                Transform your vision into Hollywood-quality imagery. Select your package, 
                choose your perfect date, and secure your cinematic photography experience.
            </p>
        </div>
        
        <!-- Main Container -->
        <div class="booking-container">
            <!-- Step Indicator -->
            <div class="step-indicator">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <span>Package</span>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <span>Schedule</span>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <span>Details</span>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <span>Confirm</span>
                </div>
            </div>
            
            <!-- Progress Indicator -->
            <div id="progress-indicator" style="text-align: center; margin-bottom: 2rem; opacity: 0; transition: opacity 0.3s ease;">
                <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.8rem; color: rgba(255, 255, 255, 0.8);">
                    <i class="fas fa-save" style="color: #22C55E;"></i>
                    <span>Your progress is saved automatically</span>
                </div>
            </div>
            
            <!-- Booking Form -->
            <form id="booking-form" class="booking-form">
                <!-- Step 1: Package Selection -->
                <div class="step-section active" id="step-1">
                    <h2 class="section-title">Choose Your Package</h2>
                    
                    <div class="service-packages">
                        <!-- Essential Package -->
                        <div class="package-card" data-package="essential">
                            <div class="package-header">
                                <div>
                                    <h3 class="package-name">Essential</h3>
                                    <div class="package-duration">1.5 hours</div>
                                </div>
                                <div class="package-price">$250</div>
                            </div>
                            <p class="package-description">
                                Perfect for professional headshots and LinkedIn profiles. 
                                Clean, polished imagery that makes a lasting impression.
                            </p>
                            <ul class="package-features">
                                <li>1.5-hour session</li>
                                <li>2 outfit changes</li>
                                <li>15 edited high-resolution images</li>
                                <li>Online gallery delivery</li>
                                <li>Basic retouching included</li>
                            </ul>
                        </div>
                        
                        <!-- Signature Cinematic Package -->
                        <div class="package-card" data-package="signature">
                            <div class="package-header">
                                <div>
                                    <h3 class="package-name">Signature Cinematic</h3>
                                    <div class="package-duration">2.5 hours</div>
                                </div>
                                <div class="package-price">$450</div>
                            </div>
                            <p class="package-description">
                                Our flagship experience. Dramatic lighting, multiple setups, 
                                and cinematic post-processing that tells your story.
                            </p>
                            <ul class="package-features">
                                <li>2.5-hour session</li>
                                <li>3-4 outfit changes</li>
                                <li>25 edited high-resolution images</li>
                                <li>Cinematic color grading</li>
                                <li>Advanced retouching</li>
                                <li>Print release included</li>
                            </ul>
                        </div>
                        
                        <!-- Creative Package -->
                        <div class="package-card" data-package="creative">
                            <div class="package-header">
                                <div>
                                    <h3 class="package-name">Creative</h3>
                                    <div class="package-duration">3 hours</div>
                                </div>
                                <div class="package-price">$575</div>
                            </div>
                            <p class="package-description">
                                Unleash your creativity with conceptual photography. 
                                Fashion editorials, artistic portraits, and bold concepts.
                            </p>
                            <ul class="package-features">
                                <li>3-hour session</li>
                                <li>Unlimited outfit changes</li>
                                <li>35 edited high-resolution images</li>
                                <li>Conceptual pre-planning</li>
                                <li>Advanced artistic editing</li>
                                <li>Commercial usage rights</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Step 2: Schedule Selection -->
                <div class="step-section" id="step-2">
                    <h2 class="section-title">Select Date & Time</h2>
                    
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <button type="button" class="calendar-nav" id="prev-month">
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <h3 class="calendar-month" id="current-month">December 2024</h3>
                            <button type="button" class="calendar-nav" id="next-month">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        
                        <div class="calendar-grid" id="calendar-grid">
                            <!-- Calendar will be generated by JavaScript -->
                        </div>
                        
                        <div class="time-slots" id="time-slots" style="display: none;">
                            <!-- Time slots will be populated when a date is selected -->
                        </div>
                    </div>
                </div>
                
                <!-- Step 3: Client Details -->
                <div class="step-section" id="step-3">
                    <h2 class="section-title">Your Information</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="client-name">Full Name *</label>
                            <input type="text" id="client-name" name="clientName" required>
                            <span class="form-error-message">Please enter your full name (at least 2 characters)</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="client-email">Email Address *</label>
                            <input type="email" id="client-email" name="clientEmail" required>
                            <span class="form-error-message">Please enter a valid email address</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="client-phone">Phone Number *</label>
                            <input type="tel" id="client-phone" name="clientPhone" required>
                            <span class="form-error-message">Please enter a valid phone number (at least 10 digits)</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="client-instagram">Instagram Handle</label>
                            <input type="text" id="client-instagram" name="clientInstagram" placeholder="@yourusername">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="session-location">Preferred Location</label>
                        <select id="session-location" name="sessionLocation">
                            <option value="">Select Location</option>
                            <option value="studio">Studio (Downtown LA)</option>
                            <option value="outdoor">Outdoor Location (LA Area)</option>
                            <option value="guangzhou">Guangzhou, China</option>
                            <option value="client-location">Your Location (+travel fee)</option>
                            <option value="discuss">Let's Discuss Options</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="session-notes">Session Details & Vision</label>
                        <textarea id="session-notes" name="sessionNotes" placeholder="Tell me about your vision, style preferences, intended use for photos, any special requests..."></textarea>
                    </div>
                </div>
                
                <!-- Step 4: Confirmation -->
                <div class="step-section" id="step-4">
                    <h2 class="section-title">Confirm Your Booking</h2>
                    
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 3rem; align-items: start;">
                        <div>
                            <div class="booking-summary">
                                <h3 class="summary-title">Booking Summary</h3>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Package</span>
                                    <span class="summary-value" id="summary-package">-</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Date</span>
                                    <span class="summary-value" id="summary-date">-</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Time</span>
                                    <span class="summary-value" id="summary-time">-</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Location</span>
                                    <span class="summary-value" id="summary-location">-</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Duration</span>
                                    <span class="summary-value" id="summary-duration">-</span>
                                </div>
                                
                                <div class="summary-item summary-total">
                                    <span class="summary-label">Total</span>
                                    <span class="summary-value" id="summary-total">$0</span>
                                </div>
                            </div>
                            
                            <div style="background: rgba(255, 107, 53, 0.1); border: 1px solid rgba(255, 107, 53, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
                                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Next Steps</h4>
                                <ul style="color: rgba(255, 255, 255, 0.8); line-height: 1.8; list-style: none; padding-left: 1rem;">
                                    <li>âœ“ $100 deposit secures your session</li>
                                    <li>âœ“ Confirmation email with session details</li>
                                    <li>âœ“ Pre-session consultation call</li>
                                    <li>âœ“ Gallery delivery within 5-7 business days</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 2rem;">
                                <h4 style="margin-bottom: 1.5rem; color: var(--light);">Complete Your Booking</h4>
                                <div style="margin-bottom: 2rem;">
                                    <div style="font-size: 2rem; color: var(--primary); margin-bottom: 0.5rem;">$100</div>
                                    <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem;">Deposit Required</div>
                                </div>
                                <button type="button" id="payment-btn" class="nav-btn primary" style="width: 100%; margin-bottom: 1.5rem;">
                                    <i class="fas fa-credit-card" style="margin-right: 0.5rem;"></i>
                                    Pay $100 Deposit
                                </button>
                                <div style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.5); margin-bottom: 1.5rem;">
                                    Secure payment via Stripe<br>
                                    Remaining balance due at session
                                </div>
                                
                                <div style="border-top: 1px solid rgba(255, 107, 53, 0.3); padding-top: 1.5rem; margin-top: 1.5rem;">
                                    <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                                        <i class="fas fa-crown" style="color: var(--primary); margin-right: 0.5rem; font-size: 1.2rem;"></i>
                                        <h5 style="margin: 0; color: var(--primary); font-size: 1rem; letter-spacing: 0.1rem;">VIP CLIENT ACCESS</h5>
                                    </div>
                                    <p style="font-size: 0.85rem; color: rgba(255, 255, 255, 0.7); line-height: 1.5; margin: 0;">
                                        Upon booking completion, you'll receive exclusive VIP portal access to manage your session, 
                                        view preparation guides, and access your photos when ready.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Navigation -->
                <div class="form-navigation">
                    <button type="button" class="nav-btn secondary" id="prev-step" style="display: none;">
                        <i class="fas fa-chevron-left"></i> Previous
                    </button>
                    
                    <div style="flex: 1;"></div>
                    
                    <button type="button" class="nav-btn primary" id="next-step">
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script src="js/script.js"></script>
    
    <!-- Booking JavaScript -->
    <script>
        // Booking form state
        let currentStep = 1;
        let selectedPackage = null;
        let selectedDate = null;
        let selectedTime = null;
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let hasUnsavedData = false;
        
        // Package data
        const packages = {
            essential: {
                name: 'Essential',
                price: 250,
                duration: '1.5 hours',
                features: ['1.5-hour session', '2 outfit changes', '15 edited images']
            },
            signature: {
                name: 'Signature Cinematic', 
                price: 450,
                duration: '2.5 hours',
                features: ['2.5-hour session', '3-4 outfit changes', '25 edited images']
            },
            creative: {
                name: 'Creative',
                price: 575, 
                duration: '3 hours',
                features: ['3-hour session', 'Unlimited outfits', '35 edited images']
            }
        };
        
        // Available time slots
        const timeSlots = [
            '9:00 AM', '10:30 AM', '12:00 PM', 
            '1:30 PM', '3:00 PM', '4:30 PM', '6:00 PM'
        ];
        
        // LocalStorage key for booking data
        const BOOKING_STORAGE_KEY = 'blakely_booking_progress';
        
        // Save booking progress to localStorage
        function saveBookingProgress() {
            const bookingData = {
                currentStep,
                selectedPackage,
                selectedDate: selectedDate ? selectedDate.getTime() : null,
                selectedTime,
                currentMonth,
                currentYear,
                formData: {
                    clientName: document.getElementById('client-name')?.value || '',
                    clientEmail: document.getElementById('client-email')?.value || '',
                    clientPhone: document.getElementById('client-phone')?.value || '',
                    clientInstagram: document.getElementById('client-instagram')?.value || '',
                    sessionLocation: document.getElementById('session-location')?.value || '',
                    sessionNotes: document.getElementById('session-notes')?.value || ''
                },
                timestamp: Date.now()
            };
            
            localStorage.setItem(BOOKING_STORAGE_KEY, JSON.stringify(bookingData));
            hasUnsavedData = true;
            console.log('Booking progress saved');
        }
        
        // Load booking progress from localStorage
        function loadBookingProgress() {
            try {
                const savedData = localStorage.getItem(BOOKING_STORAGE_KEY);
                if (!savedData) return false;
                
                const bookingData = JSON.parse(savedData);
                
                // Check if data is not too old (7 days)
                const daysSaved = (Date.now() - bookingData.timestamp) / (1000 * 60 * 60 * 24);
                if (daysSaved > 7) {
                    localStorage.removeItem(BOOKING_STORAGE_KEY);
                    return false;
                }
                
                // Restore state
                currentStep = bookingData.currentStep || 1;
                selectedPackage = bookingData.selectedPackage;
                selectedDate = bookingData.selectedDate ? new Date(bookingData.selectedDate) : null;
                selectedTime = bookingData.selectedTime;
                currentMonth = bookingData.currentMonth || new Date().getMonth();
                currentYear = bookingData.currentYear || new Date().getFullYear();
                
                // Restore form data
                if (bookingData.formData) {
                    Object.keys(bookingData.formData).forEach(key => {
                        const element = document.getElementById(key.replace(/([A-Z])/g, '-$1').toLowerCase());
                        if (element && bookingData.formData[key]) {
                            element.value = bookingData.formData[key];
                        }
                    });
                }
                
                hasUnsavedData = true;
                console.log('Booking progress restored');
                return true;
                
            } catch (error) {
                console.error('Error loading booking progress:', error);
                localStorage.removeItem(BOOKING_STORAGE_KEY);
                return false;
            }
        }
        
        // Clear booking progress from localStorage
        function clearBookingProgress() {
            localStorage.removeItem(BOOKING_STORAGE_KEY);
            hasUnsavedData = false;
            console.log('Booking progress cleared');
        }
        
        // Restore UI state after loading saved data
        function restoreUIState() {
            // Restore package selection
            if (selectedPackage) {
                document.querySelector(`[data-package="${selectedPackage}"]`)?.classList.add('selected');
            }
            
            // Restore calendar and date selection
            generateCalendar();
            if (selectedDate) {
                // Wait for calendar to render, then select date
                setTimeout(() => {
                    const dayElement = Array.from(document.querySelectorAll('.calendar-day')).find(el => 
                        el.textContent == selectedDate.getDate() && el.classList.contains('available')
                    );
                    if (dayElement) {
                        dayElement.classList.add('selected');
                        showTimeSlots();
                        
                        // Restore time selection
                        if (selectedTime) {
                            setTimeout(() => {
                                const timeElement = Array.from(document.querySelectorAll('.time-slot')).find(el => 
                                    el.textContent === selectedTime && !el.classList.contains('unavailable')
                                );
                                if (timeElement) {
                                    timeElement.classList.add('selected');
                                }
                            }, 100);
                        }
                    }
                }, 100);
            }
            
            // Restore step and validate all fields
            updateStepDisplay();
            document.querySelectorAll('#step-3 input[required]').forEach(input => {
                if (input.value) validateField(input.id);
            });
            updateSummary();
        }
        
        // Show progress indicator briefly
        function showProgressIndicator() {
            const indicator = document.getElementById('progress-indicator');
            if (indicator) {
                indicator.style.opacity = '1';
                
                // Hide after 2 seconds
                setTimeout(() => {
                    indicator.style.opacity = '0';
                }, 2000);
            }
        }
        
        // Show message when progress is restored
        function showProgressRestoredMessage() {
            const message = document.createElement('div');
            message.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, rgba(34, 197, 94, 0.9), rgba(34, 197, 94, 0.8));
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 20px rgba(34, 197, 94, 0.3);
                z-index: 10000;
                font-size: 0.9rem;
                font-weight: 500;
                transform: translateX(100%);
                transition: transform 0.3s ease;
                max-width: 300px;
            `;
            
            message.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-check-circle"></i>
                    <div>
                        <div style="font-weight: 600;">Progress Restored</div>
                        <div style="font-size: 0.8rem; opacity: 0.9;">Your booking progress has been saved</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(message);
            
            // Animate in
            setTimeout(() => {
                message.style.transform = 'translateX(0)';
            }, 100);
            
            // Auto remove after 4 seconds
            setTimeout(() => {
                message.style.transform = 'translateX(100%)';
                setTimeout(() => message.remove(), 300);
            }, 4000);
        }
        
        // Test function for debugging (call from console)
        function testFormFill() {
            document.getElementById('client-name').value = 'Test User';
            document.getElementById('client-email').value = 'test@example.com';
            document.getElementById('client-phone').value = '(555) 123-4567';
            
            // Trigger validation for each field
            validateField('client-name');
            validateField('client-email');
            validateField('client-phone');
            updateStepDisplay();
            console.log('Test data filled with validation, button should be enabled now');
        }
        
        // Make test function available globally
        window.testFormFill = testFormFill;
        
        // Force enable next button (for debugging)
        window.forceEnableNext = function() {
            document.getElementById('next-step').disabled = false;
            console.log('Next button force enabled');
        };
        
        // Check form state (for debugging)
        window.checkFormState = function() {
            const name = document.getElementById('client-name').value;
            const email = document.getElementById('client-email').value;
            const phone = document.getElementById('client-phone').value;
            const button = document.getElementById('next-step');
            console.log({
                currentStep,
                formValues: { name, email, phone },
                buttonDisabled: button.disabled,
                validationResult: validateStep(currentStep),
                hasUnsavedData,
                savedProgress: JSON.parse(localStorage.getItem(BOOKING_STORAGE_KEY) || 'null')
            });
        };
        
        // Clear saved progress (for debugging)
        window.clearSavedProgress = function() {
            clearBookingProgress();
            console.log('Saved progress cleared');
        };
        
        // Force save progress (for debugging)
        window.forceSaveProgress = function() {
            saveBookingProgress();
            showProgressIndicator();
            console.log('Progress force saved');
        };
        
        // Test VIP credential transfer (for debugging)
        window.testVIPTransfer = function() {
            const testCredentials = {
                galleryCode: 'test1234',
                password: 'TESTPASS'
            };
            
            console.log('Testing VIP credential transfer...');
            goToVIPPortal(testCredentials);
        };
        
        // Simulate full booking completion with AWS (for testing)
        window.simulateBookingCompletion = async function() {
            const testClientData = {
                name: 'Test User',
                email: 'test@example.com',
                phone: '123-456-7890',
                package: 'Signature Cinematic',
                date: new Date(),
                time: '2:00 PM',
                location: 'Studio (Downtown LA)'
            };
            
            console.log('Simulating full booking completion with AWS integration...');
            
            // Test the AWS gallery creation
            const galleryResult = await createVIPGallery(testClientData);
            
            showBookingSuccess(testClientData, galleryResult);
        };
        
        // Test direct credential storage (for debugging)
        window.testCredentialStorage = function() {
            const testCreds = {
                galleryCode: 'DIRECT123',
                password: 'PASSWORD',
                clientName: 'Direct Test',
                bookingConfirmed: true,
                timestamp: Date.now()
            };
            
            console.log('Storing test credentials directly...');
            sessionStorage.setItem('vipCredentials', JSON.stringify(testCreds));
            
            // Verify storage
            const stored = sessionStorage.getItem('vipCredentials');
            console.log('Storage successful:', !!stored);
            console.log('Stored data:', stored ? JSON.parse(stored) : 'None');
            
            console.log('Now navigate to VIP page to test auto-fill: window.open("vip.html")');
            return testCreds;
        };
        
        // Browser navigation protection
        function setupNavigationProtection() {
            window.addEventListener('beforeunload', function(e) {
                if (hasUnsavedData) {
                    e.preventDefault();
                    e.returnValue = 'Are you sure you want to leave? Your booking progress will be lost unless you complete the booking.';
                    return e.returnValue;
                }
            });
        }
        
        // Initialize booking form
        document.addEventListener('DOMContentLoaded', function() {
            // Load any saved progress first
            const hadSavedData = loadBookingProgress();
            
            initBookingForm();
            generateCalendar();
            setupNavigationProtection();
            
            // Handle URL parameters for package preselection and step navigation
            const url = new URL(window.location.href);
            const pkg = url.searchParams.get('package');
            if (pkg) {
                // Find and select the matching package
                const packageCards = document.querySelectorAll('.package-card');
                packageCards.forEach(card => {
                    const packageName = card.querySelector('.package-title')?.textContent?.trim();
                    if (packageName && packageName.toLowerCase().includes(pkg.toLowerCase())) {
                        card.click(); // Trigger the selection
                    }
                });
            }
            
            // Navigate to step 2 if hash is present
            if (window.location.hash === '#step-2') {
                setTimeout(() => {
                    const step2Element = document.querySelector('#step-2') || document.querySelector('[data-step="2"]') || document.querySelector('.booking-step:nth-child(2)');
                    if (step2Element) {
                        step2Element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        // If steps are gated, ensure step 2 is accessible
                        if (typeof showStep === 'function') {
                            showStep(2);
                        }
                    }
                }, 500);
            }
            
            // If we restored data, update the UI
            if (hadSavedData) {
                restoreUIState();
                showProgressRestoredMessage();
            }
        });
        
        function initBookingForm() {
            // Prevent form submission
            document.getElementById('booking-form').addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('Form submission prevented');
            });
            
            // Package selection
            document.querySelectorAll('.package-card').forEach(card => {
                card.addEventListener('click', function() {
                    // Remove previous selection
                    document.querySelectorAll('.package-card').forEach(c => c.classList.remove('selected'));
                    
                    // Select this package
                    this.classList.add('selected');
                    selectedPackage = this.dataset.package;
                    
                    // Enable next button
                    document.getElementById('next-step').disabled = false;
                    
                    updateSummary();
                    saveBookingProgress();
                    showProgressIndicator();
                });
            });
            
            // Navigation buttons
            document.getElementById('next-step').addEventListener('click', function(e) {
                e.preventDefault(); // Prevent any form submission
                nextStep();
            });
            document.getElementById('prev-step').addEventListener('click', function(e) {
                e.preventDefault(); // Prevent any form submission
                prevStep();
            });
            
            // Calendar navigation
            document.getElementById('prev-month').addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                generateCalendar();
            });
            
            document.getElementById('next-month').addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                generateCalendar();
            });
            
            // Form inputs - add real-time validation
            document.querySelectorAll('#step-3 input[required]').forEach(input => {
                input.addEventListener('input', function() {
                    validateField(this.id); // Validate individual field
                    updateStepDisplay(); // Update button state when form changes
                    updateSummary();
                    saveBookingProgress();
                    showProgressIndicator();
                });
                
                // Also validate on blur (when user leaves field)
                input.addEventListener('blur', function() {
                    validateField(this.id);
                    updateStepDisplay();
                    saveBookingProgress();
                });
            });
            
            // Non-required fields (just update summary)
            document.querySelectorAll('#step-3 input:not([required]), #step-3 select, #step-3 textarea').forEach(input => {
                input.addEventListener('input', function() {
                    updateSummary();
                    saveBookingProgress();
                    showProgressIndicator();
                });
            });
            
            // Initial state
            document.getElementById('next-step').disabled = true;
        }
        
        function nextStep() {
            if (currentStep < 4) {
                // Validate current step
                if (!validateStep(currentStep)) {
                    console.log('Validation failed for step:', currentStep);
                    return;
                }
                
                currentStep++;
                updateStepDisplay();
                updateSummary();
            }
        }
        
        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        }
        
        function validateField(fieldId) {
            const field = document.getElementById(fieldId);
            const formGroup = field.closest('.form-group');
            const value = field.value.trim();
            let isValid = false;
            
            switch(fieldId) {
                case 'client-name':
                    isValid = value.length >= 2;
                    break;
                case 'client-email':
                    isValid = value.includes('@') && value.includes('.') && value.length >= 5;
                    break;
                case 'client-phone':
                    isValid = value.replace(/\D/g, '').length >= 10;
                    break;
                default:
                    isValid = true;
            }
            
            // Update visual state
            formGroup.classList.remove('error', 'success');
            if (value.length > 0) { // Only show validation if user has typed something
                if (isValid) {
                    formGroup.classList.add('success');
                } else {
                    formGroup.classList.add('error');
                }
            }
            
            return isValid;
        }

        function validateStep(step) {
            switch(step) {
                case 1:
                    return selectedPackage !== null;
                case 2:
                    return selectedDate !== null && selectedTime !== null;
                case 3:
                    const nameValid = validateField('client-name');
                    const emailValid = validateField('client-email');
                    const phoneValid = validateField('client-phone');
                    
                    const isValid = nameValid && emailValid && phoneValid;
                    console.log('Step 3 validation:', { 
                        nameValid, emailValid, phoneValid, overallValid: isValid 
                    });
                    return isValid;
                default:
                    return true;
            }
        }
        
        function updateStepDisplay() {
            // Update step indicator
            document.querySelectorAll('.step').forEach((step, index) => {
                const stepNum = index + 1;
                step.classList.remove('active', 'completed');
                
                if (stepNum === currentStep) {
                    step.classList.add('active');
                } else if (stepNum < currentStep) {
                    step.classList.add('completed');
                }
            });
            
            // Show/hide sections
            document.querySelectorAll('.step-section').forEach((section, index) => {
                section.classList.remove('active');
                if (index + 1 === currentStep) {
                    section.classList.add('active');
                }
            });
            
            // Update navigation buttons
            const prevBtn = document.getElementById('prev-step');
            const nextBtn = document.getElementById('next-step');
            
            prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
            
            if (currentStep === 4) {
                nextBtn.style.display = 'none';
            } else {
                nextBtn.style.display = 'block';
                const isValid = validateStep(currentStep);
                nextBtn.disabled = !isValid;
                console.log('Button update - Step:', currentStep, 'Valid:', isValid, 'Disabled:', nextBtn.disabled);
            }
        }
        
        function generateCalendar() {
            const monthNames = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            // Update month display
            document.getElementById('current-month').textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            // Generate calendar grid
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = '';
            
            // Add day headers
            dayNames.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-day-header';
                dayHeader.textContent = day;
                grid.appendChild(dayHeader);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const today = new Date();
            
            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                grid.appendChild(emptyDay);
            }
            
            // Add days of month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                
                const dayDate = new Date(currentYear, currentMonth, day);
                
                // Check if day is today
                if (dayDate.toDateString() === today.toDateString()) {
                    dayElement.classList.add('today');
                }
                
                // Check if day is in the past
                if (dayDate < today) {
                    dayElement.classList.add('unavailable');
                } else {
                    dayElement.classList.add('available');
                    dayElement.addEventListener('click', function() {
                        selectDate(day);
                    });
                }
                
                grid.appendChild(dayElement);
            }
        }
        
        function selectDate(day) {
            // Remove previous selection
            document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
            
            // Select new date
            const dayElement = Array.from(document.querySelectorAll('.calendar-day')).find(el => 
                el.textContent == day && el.classList.contains('available')
            );
            
            if (dayElement) {
                dayElement.classList.add('selected');
                selectedDate = new Date(currentYear, currentMonth, day);
                
                // Show time slots
                showTimeSlots();
                updateSummary();
                saveBookingProgress();
                showProgressIndicator();
            }
        }
        
        function showTimeSlots() {
            const timeSlotsContainer = document.getElementById('time-slots');
            timeSlotsContainer.innerHTML = '';
            timeSlotsContainer.style.display = 'grid';
            
            timeSlots.forEach(time => {
                const slot = document.createElement('div');
                slot.className = 'time-slot';
                slot.textContent = time;
                
                // Randomly mark some as unavailable for demo
                if (Math.random() < 0.3) {
                    slot.classList.add('unavailable');
                } else {
                    slot.addEventListener('click', function() {
                        selectTime(time);
                    });
                }
                
                timeSlotsContainer.appendChild(slot);
            });
        }
        
        function selectTime(time) {
            // Remove previous selection
            document.querySelectorAll('.time-slot').forEach(t => t.classList.remove('selected'));
            
            // Select new time
            const timeElement = Array.from(document.querySelectorAll('.time-slot')).find(el => 
                el.textContent === time && !el.classList.contains('unavailable')
            );
            
            if (timeElement) {
                timeElement.classList.add('selected');
                selectedTime = time;
                
                // Enable next step
                document.getElementById('next-step').disabled = false;
                updateSummary();
                saveBookingProgress();
                showProgressIndicator();
            }
        }
        
        function updateSummary() {
            if (selectedPackage) {
                const pkg = packages[selectedPackage];
                document.getElementById('summary-package').textContent = pkg.name;
                document.getElementById('summary-duration').textContent = pkg.duration;
                document.getElementById('summary-total').textContent = '$' + pkg.price;
            }
            
            if (selectedDate) {
                document.getElementById('summary-date').textContent = selectedDate.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric', 
                    month: 'long',
                    day: 'numeric'
                });
            }
            
            if (selectedTime) {
                document.getElementById('summary-time').textContent = selectedTime;
            }
            
            const location = document.getElementById('session-location').value;
            if (location) {
                const locationText = document.querySelector(`#session-location option[value="${location}"]`).textContent;
                document.getElementById('summary-location').textContent = locationText;
            }
        }
        
        // Function to create VIP gallery in AWS
        async function createVIPGallery(bookingData) {
            try {
                console.log('Creating VIP gallery for:', bookingData.name);
                
                const response = await fetch(`${API_BASE_URL}/create-gallery`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: bookingData.name,
                        email: bookingData.email,
                        phone: bookingData.phone,
                        package: bookingData.package || bookingData.selectedPackage,
                        date: bookingData.date ? bookingData.date.toISOString() : null,
                        time: bookingData.time,
                        location: bookingData.location
                    })
                });
                
                const result = await response.json();
                console.log('Gallery creation response:', result);
                
                if (result.success) {
                    // Store the generated credentials
                    sessionStorage.setItem('galleryCode', result.galleryCode);
                    sessionStorage.setItem('password', result.password);
                    
                    console.log('Gallery created successfully:', result.galleryCode);
                    return result;
                } else {
                    console.error('Failed to create gallery:', result.message);
                    // Fallback to local credential generation
                    return generateVIPCredentialsFallback(bookingData);
                }
            } catch (error) {
                console.error('Error creating gallery:', error);
                // Fallback to local credential generation
                return generateVIPCredentialsFallback(bookingData);
            }
        }
        
        // Fallback VIP credential generation (in case AWS fails)
        function generateVIPCredentialsFallback(clientData) {
            console.log('Using fallback credential generation');
            
            // Generate unique gallery code (client name + random)
            const nameCode = clientData.name.replace(/\s+/g, '').toLowerCase().substring(0, 4);
            const randomCode = Math.random().toString(36).substring(2, 6);
            const galleryCode = nameCode + randomCode;
            
            // Generate secure password
            const passwordChars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let password = '';
            for (let i = 0; i < 8; i++) {
                password += passwordChars.charAt(Math.floor(Math.random() * passwordChars.length));
            }
            
            return {
                success: true,
                galleryCode: galleryCode,
                password: password,
                fallback: true
            };
        }
        
        // Booking completion handler - now uses Stripe
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('payment-btn').addEventListener('click', function() {
                // Call the new Stripe checkout function
                startCheckout();
            });
        });
        
        function showBookingSuccess(clientData, vipCredentials) {
            // Create success overlay
            const overlay = document.createElement('div');
            overlay.className = 'booking-success-overlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.95);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
                animation: fadeIn 0.5s ease;
                cursor: default;
            `;

            const successCard = document.createElement('div');
            successCard.style.cssText = `
                background: linear-gradient(135deg, var(--dark) 0%, rgba(255, 107, 53, 0.1) 100%);
                border: 2px solid var(--primary);
                color: white;
                padding: 3rem;
                border-radius: 20px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                animation: slideUp 0.8s ease;
                box-shadow: 0 20px 60px rgba(255, 107, 53, 0.3);
                position: relative;
                overflow: hidden;
            `;

            successCard.innerHTML = `
                <div style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255, 107, 53, 0.1) 0%, transparent 70%); animation: rotate 20s linear infinite;"></div>
                <div style="position: relative; z-index: 1;">
                    <div style="font-size: 4rem; margin-bottom: 1.5rem; color: var(--primary); animation: checkmark 1s ease;">
                        <i class="fas fa-crown"></i>
                    </div>
                    <h2 style="margin: 0 0 1rem 0; font-size: 2.2rem; font-weight: 100; letter-spacing: 0.2rem;">BOOKING CONFIRMED</h2>
                    <p style="margin: 0 0 2rem 0; opacity: 0.9; font-size: 1rem; color: rgba(255, 255, 255, 0.8);">
                        Welcome to the VIP experience, ${clientData.name}!
                    </p>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid var(--primary); border-radius: 15px; padding: 2rem; margin: 2rem 0; backdrop-filter: blur(5px);">
                        <h3 style="margin: 0 0 1.5rem 0; color: var(--primary); font-size: 1.2rem; letter-spacing: 0.1rem;">
                            <i class="fas fa-key" style="margin-right: 0.5rem;"></i>
                            VIP ACCESS CREDENTIALS
                            ${vipCredentials.fallback ? '<span style="font-size: 0.7rem; opacity: 0.7; margin-left: 1rem;">(Generated Locally)</span>' : '<span style="font-size: 0.7rem; opacity: 0.7; margin-left: 1rem;">(âœ“ Created in AWS)</span>'}
                        </h3>
                        <div style="display: grid; gap: 1rem; text-align: left;">
                            <div>
                                <label style="display: block; font-size: 0.8rem; color: rgba(255, 255, 255, 0.6); margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 0.1rem;">Gallery Code</label>
                                <div style="font-size: 1.3rem; font-weight: 500; color: var(--primary); font-family: monospace; letter-spacing: 0.2rem;">${vipCredentials.galleryCode.toUpperCase()}</div>
                            </div>
                            <div>
                                <label style="display: block; font-size: 0.8rem; color: rgba(255, 255, 255, 0.6); margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 0.1rem;">Password</label>
                                <div style="font-size: 1.3rem; font-weight: 500; color: var(--primary); font-family: monospace; letter-spacing: 0.2rem;">${vipCredentials.password}</div>
                            </div>
                        </div>
                        ${!vipCredentials.fallback ? '<div style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 1rem; margin-top: 1rem; font-size: 0.8rem; color: rgba(255, 255, 255, 0.8);"><i class="fas fa-cloud-upload-alt" style="margin-right: 0.5rem; color: #22C55E;"></i>Your gallery has been created in our system and confirmation email sent!</div>' : ''}
                    </div>
                    
                    <div style="margin: 2rem 0; padding: 1.5rem; background: rgba(255, 107, 53, 0.1); border-radius: 12px; border: 1px solid rgba(255, 107, 53, 0.3);">
                        <h4 style="margin: 0 0 1rem 0; color: var(--primary); font-size: 1rem;">What's Next?</h4>
                        <ul style="text-align: left; color: rgba(255, 255, 255, 0.8); line-height: 1.8; margin: 0; padding-left: 1.5rem; font-size: 0.9rem;">
                            <li>âœ… Confirmation email sent with session details</li>
                            <li>ðŸ”‘ VIP portal access with credentials above</li>
                            <li>ðŸ“ž Pre-session consultation call (we'll contact you)</li>
                            <li>ðŸ“¸ Gallery delivery 5-7 business days after session</li>
                        </ul>
                    </div>
                    
                    <div style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 1rem; margin-bottom: 1rem; text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; color: #22C55E; font-size: 0.9rem;">
                            <i class="fas fa-magic"></i>
                            <span>Your credentials will be automatically filled in the VIP portal!</span>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button id="vip-portal-btn" style="flex: 1; background: linear-gradient(135deg, var(--primary), #FF8C5A); color: var(--dark); border: none; padding: 1rem; border-radius: 8px; font-weight: 500; cursor: pointer; transition: all 0.3s ease; z-index: 10001;">
                            <i class="fas fa-crown" style="margin-right: 0.5rem;"></i>
                            <span id="vip-btn-text">Go to VIP Portal</span>
                            <span id="countdown-text" style="display: none;"></span>
                        </button>
                        <button onclick="closeBookingSuccess()" style="flex: 1; background: transparent; color: var(--light); border: 1px solid rgba(255, 255, 255, 0.3); padding: 1rem; border-radius: 8px; font-weight: 500; cursor: pointer; transition: all 0.3s ease; z-index: 10001;">
                            Close
                        </button>
                    </div>
                </div>
            `;

            overlay.appendChild(successCard);
            document.body.appendChild(overlay);

            // Add animations and cursor fixes
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideUp {
                    from { transform: translateY(50px) scale(0.9); opacity: 0; }
                    to { transform: translateY(0) scale(1); opacity: 1; }
                }
                @keyframes checkmark {
                    0% { transform: scale(0) rotate(0deg); }
                    50% { transform: scale(1.2) rotate(10deg); }
                    100% { transform: scale(1) rotate(0deg); }
                }
                @keyframes rotate {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                
                /* Ensure cursor visibility in success overlay */
                .booking-success-overlay * {
                    cursor: default !important;
                }
                
                .booking-success-overlay button {
                    cursor: pointer !important;
                }
                
                .booking-success-overlay button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
                }
            `;
            document.head.appendChild(style);
            
            // Store credentials in sessionStorage for VIP portal (initial storage)
            const credentialsToStore = {
                galleryCode: vipCredentials.galleryCode,
                password: vipCredentials.password,
                clientName: clientData.name,
                bookingConfirmed: true,
                timestamp: Date.now()
            };
            
            sessionStorage.setItem('vipCredentials', JSON.stringify(credentialsToStore));
            console.log('Credentials initially stored:', credentialsToStore);
            
            // Clear saved booking progress since booking is complete
            clearBookingProgress();
            
            // Set up the VIP portal button and auto-redirect
            setupVIPTransfer(vipCredentials);
            
            // TODO: Send booking data to backend
            console.log('Booking Data:', clientData, vipCredentials);
        }
        
        // Handle VIP portal transfer with countdown
        function setupVIPTransfer(vipCredentials) {
            const vipBtn = document.getElementById('vip-portal-btn');
            const btnText = document.getElementById('vip-btn-text');
            const countdownText = document.getElementById('countdown-text');
            
            // Set up manual button click
            vipBtn.addEventListener('click', function() {
                goToVIPPortal(vipCredentials);
            });
            
            // Start auto-redirect countdown after 3 seconds
            let countdown = 8; // 8 second countdown
            
            setTimeout(() => {
                btnText.style.display = 'none';
                countdownText.style.display = 'inline';
                
                const countdownInterval = setInterval(() => {
                    countdownText.textContent = `Auto-redirecting in ${countdown}s...`;
                    countdown--;
                    
                    if (countdown < 0) {
                        clearInterval(countdownInterval);
                        goToVIPPortal(vipCredentials);
                    }
                }, 1000);
                
                // Allow user to cancel countdown by clicking
                vipBtn.addEventListener('click', function() {
                    clearInterval(countdownInterval);
                });
                
            }, 3000); // Wait 3 seconds before starting countdown
        }
        
        // Navigate to VIP portal with pre-filled credentials
        function goToVIPPortal(vipCredentials) {
            console.log('Transferring to VIP portal with credentials:', {
                galleryCode: vipCredentials.galleryCode,
                password: '***hidden***',
                hasCredentials: !!(vipCredentials.galleryCode && vipCredentials.password)
            });
            
            // Verify current storage (credentials should already be stored)
            const stored = sessionStorage.getItem('vipCredentials');
            console.log('Credentials in sessionStorage before transfer:', !!stored);
            
            if (stored) {
                const parsed = JSON.parse(stored);
                console.log('Stored credential preview:', {
                    hasGalleryCode: !!parsed.galleryCode,
                    hasPassword: !!parsed.password,
                    bookingConfirmed: !!parsed.bookingConfirmed
                });
            } else {
                console.error('No credentials found in storage! Re-storing...');
                // Fallback: re-store if missing
                sessionStorage.setItem('vipCredentials', JSON.stringify({
                    galleryCode: vipCredentials.galleryCode,
                    password: vipCredentials.password,
                    clientName: 'New Client',
                    bookingConfirmed: true,
                    timestamp: Date.now()
                }));
            }
            
            // Navigate to VIP portal (same tab for seamless experience)
            console.log('Navigating to vip.html...');
            window.location.href = 'vip.html';
        }
        
        // Close booking success popup
        function closeBookingSuccess() {
            const overlay = document.querySelector('[style*="position: fixed"]');
            if (overlay) {
                overlay.remove();
            }
        }
    </script>
    
    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Stripe Integration -->
    <script>
        // Initialize Stripe with publishable key placeholder
        // Replace pk_live_xxx with actual publishable key after implementation
        const stripe = Stripe("pk_live_51S06CcF2BZHg4Pgy8T3HkQp37cB9dUOA6LnwnMWoLXt8WpdXbc8doZFSmX3iU6wpHBn8SnPhagFkjhmxswaqhVex00mEUIH0Mg");
        
        // Real Stripe checkout function
        async function startCheckout() {
            const paymentBtn = document.getElementById('payment-btn');
            
            // Show loading state
            paymentBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            paymentBtn.disabled = true;
            
            try {
                // Get client data
                const clientData = {
                    name: document.getElementById('client-name').value,
                    email: document.getElementById('client-email').value,
                    phone: document.getElementById('client-phone').value,
                    package: selectedPackage,
                    date: selectedDate,
                    time: selectedTime,
                    location: document.getElementById('session-location').value
                };
                
                // Call backend to create Stripe checkout session
                const response = await fetch("https://4l12h6snuh.execute-api.us-east-1.amazonaws.com/pay/checkout-session", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        clientData: clientData,
                        amount: 10000, // $100 deposit in cents
                        currency: 'usd',
                        successUrl: window.location.origin + '/booking-success.html',
                        cancelUrl: window.location.href
                    })
                });
                
                const session = await response.json();
                
                if (session.error) {
                    throw new Error(session.error);
                }
                
                // Redirect user to Stripe Checkout
                const result = await stripe.redirectToCheckout({ sessionId: session.id });
                
                if (result.error) {
                    throw new Error(result.error.message);
                }
                
            } catch (error) {
                console.error('Stripe checkout error:', error);
                
                // Reset button
                paymentBtn.innerHTML = '<i class="fas fa-credit-card" style="margin-right: 0.5rem;"></i>Pay $100 Deposit';
                paymentBtn.disabled = false;
                
                // Show error message
                alert('There was an error processing your payment. Please try again or contact us directly.');
            }
        }
    </script>
</body>
</html>